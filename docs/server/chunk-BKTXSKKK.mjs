import './polyfills.server.mjs';
import{a as k}from"./chunk-OW5HWKA7.mjs";import"./chunk-QZLY374Y.mjs";import{a as b,b as g,c as T,d as y,e as A,f as C,h as M,i as N,j as R,m as q}from"./chunk-ZTFRRJOI.mjs";import"./chunk-QKIAIGA6.mjs";import{d as w,e as L}from"./chunk-RAJTPVA5.mjs";import"./chunk-TLHJX3RA.mjs";import"./chunk-UNDE556V.mjs";import{$ as S,Db as l,Eb as E,Kb as F,Pa as m,X as h,eb as u,gb as v,kb as s,ob as i,pb as t,qb as c,vb as x,wb as _}from"./chunk-EDBUG26B.mjs";import"./chunk-VVCT4QZE.mjs";function D(e,n){e&1&&(i(0,"p",15),l(1,"email Is Required"),t())}function G(e,n){e&1&&(i(0,"p",15),l(1,"Enter Valid Email "),t())}function I(e,n){if(e&1&&(i(0,"div",7),u(1,D,2,0,"p",15)(2,G,2,0),t()),e&2){let r,o=_();m(),s(1,(r=o.loginForm.get("email"))!=null&&r.getError("required")?1:(r=o.loginForm.get("email"))!=null&&r.getError("email")?2:-1)}}function V(e,n){e&1&&(i(0,"p",15),l(1,"password Is Required"),t())}function j(e,n){e&1&&(i(0,"p",15),l(1,"Enter Valid password "),t())}function P(e,n){if(e&1&&(i(0,"div",7),u(1,V,2,0,"p",15)(2,j,2,0),t()),e&2){let r,o=_();m(),s(1,(r=o.loginForm.get("password"))!=null&&r.getError("required")?1:(r=o.loginForm.get("password"))!=null&&r.getError("pattern")?2:-1)}}function U(e,n){e&1&&(i(0,"span"),c(1,"i",16),t())}function $(e,n){if(e&1&&(i(0,"p",13),l(1),t()),e&2){let r=_();m(),E(r.errMessg)}}function z(e,n){e&1&&(i(0,"p",14),l(1,"Account Loged in Successfuly"),t())}var X=(()=>{let n=class n{constructor(){this._AuthService=h(k),this._Router=h(w),this.messageSuccess=!1,this.errMessg="",this.isLoading=!1,this.loginForm=new A({email:new C(null,[g.required,g.email]),password:new C(null,[g.required,g.pattern(/^\w{6,}$/)])})}loginSubmit(){this.loginForm.valid?(console.log(this.loginForm),this.isLoading=!0,this._AuthService.setloginForm(this.loginForm.value).subscribe({next:o=>{console.log(o),o.message=="success"&&(this.messageSuccess=!0,setTimeout(()=>{localStorage.setItem("userToken",o.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},1e3)),this.isLoading=!1},error:o=>{console.log(o),this.errMessg=o.error.message,this.isLoading=!1}})):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAllAsTouched(),this.errMessg="All Inputs Are Required ...")}};n.\u0275fac=function(f){return new(f||n)},n.\u0275cmp=S({type:n,selectors:[["app-login"]],standalone:!0,features:[F],decls:24,vars:6,consts:[[1,"bg-main-light","shadow","p-2","rounded-4"],[1,"container"],[1,"h2","text-main","mb-4"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control"],[1,"alert","alert-danger","w-50"],["for","password"],["id","password","type","password","formControlName","password",1,"form-control"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forgot",1,"link-primary","fw-bold"],["type","submit",1,"btn-main"],[1,"alert","alert-danger","w-50","m-auto","text-center"],[1,"alert","alert-success","w-50","m-auto","text-center"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(f,a){if(f&1&&(i(0,"section",0)(1,"div",1)(2,"h1",2),l(3," login Now :"),t(),c(4,"hr"),i(5,"form",3),x("ngSubmit",function(){return a.loginSubmit()}),i(6,"div",4)(7,"label",5),l(8,"Email :"),t(),c(9,"input",6),u(10,I,3,1,"div",7),t(),i(11,"div",4)(12,"label",8),l(13,"Password :"),t(),c(14,"input",9),u(15,P,3,1,"div",7),t(),i(16,"div",10)(17,"a",11),l(18," Forget Password "),t(),i(19,"button",12),l(20,"login "),u(21,U,2,0,"span"),t()(),u(22,$,2,1,"p",13)(23,z,2,0,"p",14),t()()()),f&2){let d,p;m(5),v("formGroup",a.loginForm),m(5),s(10,(d=a.loginForm.get("email"))!=null&&d.errors&&((d=a.loginForm.get("email"))!=null&&d.touched||(d=a.loginForm.get("email"))!=null&&d.dirty)?10:-1),m(5),s(15,(p=a.loginForm.get("password"))!=null&&p.errors&&((p=a.loginForm.get("password"))!=null&&p.touched||(p=a.loginForm.get("password"))!=null&&p.dirty)?15:-1),m(6),s(21,a.isLoading?21:-1),m(),s(22,a.errMessg!=""?22:-1),m(),s(23,a.messageSuccess==!0?23:-1)}},dependencies:[q,M,b,T,y,N,R,L]});let e=n;return e})();export{X as LoginComponent};
