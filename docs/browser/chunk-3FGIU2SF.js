import{a as G}from"./chunk-4QNMSR6H.js";import"./chunk-G5KA7DMQ.js";import{a as b,b as d,c as F,d as N,h as V,i as M,j as P,k as T,m as A}from"./chunk-IHXT6GOO.js";import{c as E}from"./chunk-TROJL5PG.js";import"./chunk-T7Y5CFBQ.js";import"./chunk-SX5AWIEO.js";import{$ as _,Eb as a,Fb as w,Lb as S,Qa as s,ca as y,fb as c,hb as p,lb as u,ma as g,na as v,pb as r,qb as o,rb as f,ub as x,wb as C,xb as m}from"./chunk-A6ZNTDGY.js";function B(i,n){if(i&1&&(r(0,"p",7),a(1),o()),i&2){let e=m(2);s(),w(e.errMsg)}}function D(i,n){if(i&1){let e=x();r(0,"form",3),C("ngSubmit",function(){g(e);let l=m();return v(l.verify_Email())}),r(1,"div")(2,"label",4),a(3," Email "),o(),f(4,"input",5),o(),r(5,"button",6),a(6,"Verify Email"),o(),c(7,B,2,1,"p",7),o()}if(i&2){let e=m();p("formGroup",e.verifyEmail),s(5),p("disabled",e.verifyEmail.invalid),s(2),u(7,e.errMsg!==""?7:-1)}}function q(i,n){if(i&1&&(r(0,"p",7),a(1),o()),i&2){let e=m(2);s(),w(e.errMsg)}}function I(i,n){if(i&1){let e=x();r(0,"form",3),C("ngSubmit",function(){g(e);let l=m();return v(l.verify_Code())}),r(1,"div")(2,"label",8),a(3," code "),o(),f(4,"input",9),o(),r(5,"button",6),a(6,"Verify Code"),o(),c(7,q,2,1,"p",7),o()}if(i&2){let e=m();p("formGroup",e.verifyCode),s(5),p("disabled",e.verifyCode.invalid),s(2),u(7,e.errMsg!==""?7:-1)}}function R(i,n){if(i&1&&(r(0,"p",7),a(1),o()),i&2){let e=m(2);s(),w(e.errMsg)}}function k(i,n){if(i&1){let e=x();r(0,"form",3),C("ngSubmit",function(){g(e);let l=m();return v(l.verify_NewPass())}),r(1,"div")(2,"label",4),a(3," Email "),o(),f(4,"input",10),o(),r(5,"div")(6,"label",11),a(7," Password "),o(),f(8,"input",12),o(),r(9,"button",6),a(10,"Verify New Password"),o(),c(11,R,2,1,"p",7),o()}if(i&2){let e=m();p("formGroup",e.verifyNewPass),s(9),p("disabled",e.verifyNewPass.invalid),s(2),u(11,e.errMsg!==""?11:-1)}}var L=(()=>{let n=class n{constructor(){this._FormBuilder=_(T),this._AuthService=_(G),this._Router=_(E),this.step=1,this.errMsg="",this.verifyEmail=this._FormBuilder.group({email:[null,[d.required,d.email]]}),this.verifyCode=this._FormBuilder.group({resetCode:[null,[d.required,d.pattern(/^\w{6}$/)]]}),this.verifyNewPass=this._FormBuilder.group({email:[null,[d.required,d.email]],newPassword:[null,[d.required,d.pattern(/^\w{6,}$/)]]})}verify_Email(){this.verifyNewPass.get("email")?.patchValue(this.verifyEmail.get("email")?.value),this._AuthService.set_Verify_Email(this.verifyEmail.value).subscribe({next:t=>{console.log(t),t.statusMsg=="success"&&(this.step=2,this.errMsg="")},error:t=>{console.log(t.error.message),this.errMsg=t.error.message}})}verify_Code(){this._AuthService.set_Verify_Code(this.verifyCode.value).subscribe({next:t=>{console.log(t),t.status=="Success"&&(this.step=3,this.errMsg="")},error:t=>{console.log(t),this.errMsg=t.error.message}})}verify_NewPass(){this._AuthService.set_NewPass(this.verifyNewPass.value).subscribe({next:t=>{console.log(t),localStorage.setItem("userToken",t.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:t=>{console.log(t),this.errMsg=t.error.message}})}};n.\u0275fac=function(l){return new(l||n)},n.\u0275cmp=y({type:n,selectors:[["app-forgotpassword"]],standalone:!0,features:[S],decls:6,vars:1,consts:[[1,"container"],[1,"text-center","text-main","my-3"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"formGroup"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"ngSubmit","formGroup"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control"],[1,"btn-main","mt-2",3,"disabled"],[1,"alert","alert-danger","w-50","m-auto","text-center"],["for","code"],["formControlName","resetCode","id","code","type","text",1,"form-control"],["readonly","","formControlName","email","id","email","type","email",1,"form-control"],["for","Password"],["formControlName","newPassword","id","Password","type","password",1,"form-control"]],template:function(l,h){l&1&&(r(0,"div",0)(1,"h1",1),a(2," Forget Password"),o(),c(3,D,8,3,"form",2)(4,I,8,3)(5,k,12,3),o()),l&2&&(s(3),u(3,h.step==1?3:h.step==2?4:h.step==3?5:-1))},dependencies:[A,V,b,F,N,M,P]});let i=n;return i})();export{L as ForgotpasswordComponent};
