import{a as z}from"./chunk-QEBQ4NUR.js";import{a as B}from"./chunk-QDA5HULV.js";import{a as j}from"./chunk-XUED5H7O.js";import{a as N,c as $,g as O,l as U}from"./chunk-IHXT6GOO.js";import{a as G}from"./chunk-7B2TGVEO.js";import{l as R}from"./chunk-KDUMAKCF.js";import{d as I}from"./chunk-TROJL5PG.js";import"./chunk-T7Y5CFBQ.js";import"./chunk-SX5AWIEO.js";import{$ as m,Eb as d,Fb as x,Gb as b,Hb as k,Ib as y,Jb as E,Lb as V,Ma as F,Mb as M,Nb as D,Qa as a,Rb as L,Tb as A,ca as P,fb as h,hb as S,lb as _,ma as u,mb as w,na as p,nb as W,ob as T,pb as o,qb as s,rb as f,ub as C,wb as v,xb as l}from"./chunk-A6ZNTDGY.js";var q=(e,r)=>r.id,H=e=>["/details",e],J=()=>[1,2,3,4,5];function K(e,r){if(e&1){let i=C();o(0,"i",15),v("click",function(){u(i);let t=l().$implicit,c=l(2);return p(c.addToWishlist(t.id))}),s()}}function Q(e,r){if(e&1){let i=C();o(0,"i",16),v("click",function(){u(i);let t=l().$implicit,c=l(2);return p(c.removeFromWishlist(t.id))}),s()}}function X(e,r){e&1&&(o(0,"span"),f(1,"i",17),s())}function Y(e,r){e&1&&f(0,"i",12)}function Z(e,r){if(e&1){let i=C();o(0,"div",3)(1,"div",4),h(2,K,1,0,"i",5)(3,Q,1,0,"i",6),o(4,"div",7),f(5,"img",8),o(6,"h3",9),d(7),s(),o(8,"h4",10),d(9),s(),o(10,"div",11)(11,"span"),d(12),s(),o(13,"div"),W(14,X,2,0,"span",null,w),h(16,Y,1,0,"i",12),o(17,"span",13),d(18),s()()()(),o(19,"button",14),v("click",function(){let t=u(i).$implicit,c=l(2);return p(c.addToCart(t.id))}),d(20,"Add To Cart"),s()()()}if(e&2){let i=r.$implicit,n=l(2);a(2),_(2,n._WishlistService.WishlistData.includes(i.id)?-1:2),a(),_(3,n._WishlistService.WishlistData.includes(i.id)?3:-1),a(),S("routerLink",D(10,H,i.id)),a(),S("src",i.imageCover,F)("alt",i.title),a(2),x(i.category.name),a(2),x(i.title.split(" ",2).join(" ")),a(3),b("",i.price,"EGP"),a(2),T(M(12,J).slice(0,i.ratingsAverage)),a(2),_(16,i.ratingsAverage%1!==0?16:-1),a(2),x(i.ratingsAverage)}}function tt(e,r){if(e&1&&(W(0,Z,21,13,"div",3,q),L(2,"search")),e&2){let i=l();T(A(2,0,i.productsList,i.searchWord))}}var ut=(()=>{let r=class r{constructor(){this._ProductService=m(B),this._CartService=m(G),this._ToastrService=m(R),this._WishlistService=m(j),this.searchWord=""}ngOnInit(){this.unsubscribeProsucts=this._ProductService.getAllProduct().subscribe({next:n=>{this.productsList=n.data,console.log(n.data)}}),this._WishlistService.getUserWishlist().subscribe({next:n=>{this._WishlistService.WishlistData=n.data.map(t=>t._id)}})}addToCart(n){this._CartService.addProductToCart(n).subscribe({next:t=>{console.log(t),this._ToastrService.success(t.message,"Fresh Products"),this._CartService.cartNumber.next(t.numOfCartItems)}})}addToWishlist(n){this._WishlistService.addToWishlist(n).subscribe({next:t=>{console.log(t),this._ToastrService.success("Successfully Added To Wish List","Fresh Products"),this._WishlistService.WishlistData=t.data}})}removeFromWishlist(n){this._WishlistService.removeFromWishlist(n).subscribe({next:t=>{console.log(t),this._ToastrService.warning(t.message,"Fresh Cart"),this._WishlistService.WishlistData=t.data}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=P({type:r,selectors:[["app-product"]],standalone:!0,features:[V],decls:4,vars:2,consts:[[1,"my-5","p-2"],["type","search","placeholder","Search For Products",1,"form-control","p-3","mt-5","w-75","mx-auto",3,"ngModelChange","ngModel"],[1,"row","g-4","container","mx-auto"],[1,"col-md-3","shadow"],[1,"inner","product","p-2"],[1,"fa-regular","fa-heart","fa-2x","ms-auto","cr"],[1,"fa-solid","fa-heart","text-danger","fa-2x","ms-auto","cr"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-solid","fa-star-half-stroke","rating-color"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"fa-regular","fa-heart","fa-2x","ms-auto","cr",3,"click"],[1,"fa-solid","fa-heart","text-danger","fa-2x","ms-auto","cr",3,"click"],[1,"fas","fa-star","rating-color"]],template:function(t,c){t&1&&(o(0,"div",0)(1,"input",1),E("ngModelChange",function(g){return y(c.searchWord,g)||(c.searchWord=g),g}),s()(),o(2,"div",2),h(3,tt,3,3),s()),t&2&&(a(),k("ngModel",c.searchWord),a(2),_(3,c.productsList!==void 0?3:-1))},dependencies:[I,U,N,$,O,z]});let e=r;return e})();export{ut as ProductComponent};
